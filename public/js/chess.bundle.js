!function(n){var e={};function o(t){if(e[t])return e[t].exports;var r=e[t]={i:t,l:!1,exports:{}};return n[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=n,o.c=e,o.d=function(n,e,t){o.o(n,e)||Object.defineProperty(n,e,{configurable:!1,enumerable:!0,get:t})},o.r=function(n){Object.defineProperty(n,"__esModule",{value:!0})},o.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return o.d(e,"a",e),e},o.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},o.p="",o(o.s=25)}({0:function(n,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=io();e.SendInfo=function(n,e,o){e.on("piece moved",function(e){o.move(e),n.position(o.fen())})},e.socket=t},25:function(n,e,o){"use strict";var t=o(0),r=null,c=null,i=null;$.post(document.location.pathname.split("/")[2],async function(n){r=n.white,c=n.black}),fetch("/user",{credentials:"same-origin"}).then(function(n){return n.json()}).then(function(n){return i=n.alias}),t.socket.emit("setRoom",document.location.pathname.split("/")[2]),$(document).ready(function(){var n,e=new Chess,o=$("#status"),s=$("#fen"),a=$("#pgn"),u=function(){var n="",t="White";"b"===e.turn()&&(t="Black"),!0===e.in_checkmate()?n="Game over, "+t+" is in checkmate.":!0===e.in_draw()?n="Game over, drawn position":(n=t+" to move",!0===e.in_check()&&(n+=", "+t+" is in check")),o.html(n),s.html(e.fen()),a.html(e.pgn())};n=ChessBoard("board",{draggable:!0,position:"start",onDragStart:function(n,o,t,s){if(console.log(o.search(/^b/)),console.log(o.search(/^w/)),console.log(o),console.log(JSON.stringify(o)),!0===e.game_over()||i===c&&-1!==o.search(/^b/)||i===r&&-1!==o.search(/^w/))return!1},onDrop:function(n,o){var r=e.move({from:n,to:o,promotion:"q"});if(null===r)return"snapback";t.socket.emit("piece moved",r),console.log("moved"),u()},onSnapEnd:function(){n.position(e.fen())},onChange:function(n,e){console.log(r,c),console.log("User: ",i),u()}}),$("#flip").click(function(){return n.flip()}),(0,t.SendInfo)(n,t.socket,e),u()})}});